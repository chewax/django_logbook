{% extends 'accounts/base.html' %}
{% load static from staticfiles %}
{% load widget_tweaks %}

{% block css %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static "css/jquery.datetimepicker.css" %}"
{% endblock %}

{% block content %}
    <div class="flight-wrapper">
        <form method="post" action="/flights/new">
            {% csrf_token %}
            <div class="flight-header">
                {% for field in form %}
                    <div class="form-field">
                        {{ field.errors }}
                        {{ field.name | title}} {{ field }}
                    </div>
                {% endfor %}
            </div>
            <div class="flight-legs">
                {{ flight_legs.management_form }}
                <table>
                    <tr>
                        <th></th>
                        <th>From</th>
                        <th>To</th>
                        <th>T/O</th>
                        <th>Ldgs.</th>
                        <th>Rules</th>
                        <th>Out</th>
                        <th>Off</th>
                        <th>On</th>
                        <th>In</th>
                    </tr>
                {% for leg_form in flight_legs %}
                    <tr>
                        {% for leg_field in leg_form %}
                            <td>
                            {{ leg_field.errors }}
                            {% if leg_field.name in "time_off,time_out,time_on,time_in" %}
                                {{ leg_field | add_class:"datetimepicker"}}
                            {% else %}
                                {{ leg_field }}
                            {% endif %}
                            </td>
                        {% endfor %}
                    </tr>
                {% endfor %}
                </table>
            </div>
            <div class="field"><button class="form-button" type="submit">Insert/Update</button></div>
        </form>
    </div>
{% endblock %}


{% block js %}
    {{ block.super }}
    <script src="{% static 'js/jquery.datetimepicker.js' %}" type="text/javascript"></script>
    <script type="text/javascript">
        $(".datetimepicker").datetimepicker({
        format:'Y-m-d H:i',
        mask:true
        });
    </script>
{% endblock %}